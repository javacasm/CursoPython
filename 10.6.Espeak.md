## Espeak

![Síntesis de voz en la película "Juegos de Guerra"](./images/Joshua.jpg)

Vamos a integrar el módulo [pyttsx3](https://github.com/nateshmbhat/pyttsx3) para poder usar un sistema de síntesis de voz (TTS: Text To Speech) desde nuestro código Python.

Este módulo es capaz de interaccionar con diferentes módulos TTS, y en concreto en Linux usa la librería *espeak* que suena muy similar al sistema de síntesis de voz de la película "Juegos de Guerra" (si no la has visto, te la recomiendo).

Podemos instalarlo con pip:

```sh
pip install pyttsx3
```

o desde el gestor de módulos de Thonny.

Podemos encontrar  en la [documentación](https://pyttsx3.readthedocs.io/en/latest/engine.html) cómo usarla.

Una vez instalado podemos usarlo de manera muy sencilla:

[Código](https://raw.githubusercontent.com/javacasm/CursoPython/master/codigo/10.6.espeaker.py)

```python
import pyttsx3
import Preguntas20

def main():
    engine = pyttsx3.init()
    message = 'Grettings Professor Falken. Would you want to play?'
    engine.say(message)
    engine.runAndWait()

    voces = engine.getProperty('voices')
    for voz in voces:
        print(voz)
    
    
    velocidad = engine.getProperty('rate')
    engine.setProperty('rate',velocidad * 2)
    print('velocidad * 2' )
    engine.say(message)
    engine.runAndWait()
    
    volumen = engine.getProperty('volume')
    engine.setProperty('volume',volumen / 2)
    print('volume/2')
    engine.say(message)
    engine.runAndWait()
    
    fichero = 'joshua.mp3'
    engine.setProperty('volume', volumen)
    engine.setProperty('rate', velocidad)
    engine.save_to_file(message, fichero)
    engine.runAndWait()
    print('Guardado el fichero '+ fichero)
    
    engine.setProperty('voice','spanish') 
    engine.say('Hola profesor Falken. ¿Quiere jugar?')
    engine.runAndWait()
    
    engine.stop()
    
if __name__ == '__main__':
    main()

```

[![Vídeo: Texto a Voz (Text to Speech) con pyttsx3](https://img.youtube.com/vi/sI8EeZGPNgw/0.jpg)](https://drive.google.com/file/d/14oAgpV6dQJnOO0a5xwWdFkWjC5ZWalzf/view?usp=sharing)


[Vídeo: Texto a Voz (Text to Speech) con pyttsx3](https://drive.google.com/file/d/14oAgpV6dQJnOO0a5xwWdFkWjC5ZWalzf/view?usp=sharing)


## Aplicación: Joshua juega a las 20 Preguntas

Ahora vamos a adaptar nuestro Juego de 20 preguntas para que Joshua nos lea las preguntas y las posibles respuestas:

[Código](https://github.com/javacasm/CursoPython/raw/master/codigo/10.6.joshua.py)

```python
# Joshua juega a  20 Preguntas

import pyttsx3
import Preguntas20

def main():
    engine = pyttsx3.init()
    engine.setProperty('voice','spanish') 

    juego = Preguntas20.Juego20()
    pregunta ='Hola Profesor Falken '
    while True:
        engine.say(pregunta)
        print(pregunta + ' ',end ='')
        engine.runAndWait()
        respuesta = input()
        pregunta = juego.updateEstado(respuesta)

if __name__ == '__main__':
    main()
```


[![Vídeo: Joshua juega a 20 Preguntas](https://img.youtube.com/vi/kNAXuEUdisI/0.jpg)](https://drive.google.com/file/d/1L00bctNQYSn5-kaxNqiJWvlz9y-8lYiJ/view?usp=sharing)


[Vídeo: Joshua juega a 20 Preguntas](https://drive.google.com/file/d/1L00bctNQYSn5-kaxNqiJWvlz9y-8lYiJ/view?usp=sharing)

